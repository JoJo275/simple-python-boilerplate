# =============================================================================
# Design Proposal Issue Template
# =============================================================================
# This template is for proposing significant design or architectural changes.
# Sections: Introduction, Redirect Notice, Proposal Details, Impact Analysis,
#           Alternatives, Implementation, Checklist
# =============================================================================

name: ðŸŽ¨ Design Proposal
description: >
  Propose a significant design or architectural change.
  For smaller enhancements, please use the Feature Request template.
title: "[DESIGN] Short description of the proposal"
labels: ["design", "status: needs-triage"]
assignees: [] # Optionally assign specific team members to review design proposals
# type: (Optionally set specific issue types for issues created with this template (only works if your org has issue types configured; it's org-level))


body:
  # ---------------------------------------------------------------------------
  # Introduction
  # ---------------------------------------------------------------------------
  # Brief guidance for submitting a helpful design proposal.
  # ---------------------------------------------------------------------------
  - type: markdown
    attributes:
      value: |
        Thanks for taking the time to propose a design change! ðŸŽ¨

        Design proposals help us make thoughtful architectural decisions.
        Please provide as much context as possible to facilitate discussion.

  # ---------------------------------------------------------------------------
  # Redirect Notice
  # ---------------------------------------------------------------------------
  # Directs users to appropriate channels for related but different issues.
  # ---------------------------------------------------------------------------
  - type: markdown
    attributes:
      value: |
        âš ï¸ **Before submitting**
        - **Security vulnerability?** Do **not** open a public issue. See [SECURITY.md](../../../SECURITY.md).
        - **Small enhancement?** Use the **Feature Request** template instead.
        - **Early-stage idea?** Start in [Discussions](../../../discussions) (Ideas/Proposals) first.
        - Search existing issues and discussions to avoid duplicates.

  # ---------------------------------------------------------------------------
  # Proposal Details
  # ---------------------------------------------------------------------------
  # Core information about the design proposal.
  # ---------------------------------------------------------------------------
  - type: textarea
    id: summary
    attributes:
      label: Summary
      description: >
        Provide a brief summary of the proposed design change.
      placeholder: |
        Example: "Introduce a plugin architecture to allow extensibility..."
    validations:
      required: true

  - type: textarea
    id: motivation
    attributes:
      label: Motivation
      description: >
        Why is this design change needed? What problem does it solve?
      placeholder: |
        Example: "Currently, adding new functionality requires modifying core code..."
    validations:
      required: true

  - type: textarea
    id: goals
    attributes:
      label: Goals
      description: >
        What are the specific goals this design aims to achieve?
        Be explicit about what success looks like.
      placeholder: |
        - Goal 1: Enable third-party plugins without modifying core code
        - Goal 2: Maintain backward compatibility with existing integrations
        - Goal 3: ...
    validations:
      required: true

  - type: textarea
    id: non_goals
    attributes:
      label: Non-Goals (Optional)
      description: >
        What is explicitly out of scope for this design?
        This helps keep the proposal focused and prevents scope creep.
      placeholder: |
        - Non-goal: Supporting plugins written in languages other than Python
        - Non-goal: Providing a plugin marketplace or discovery mechanism
    validations:
      required: false

  - type: dropdown
    id: scope
    attributes:
      label: Scope
      description: What is the scope of this design change?
      options:
        - Architecture / System design
        - API design
        - Data model / Schema
        - Module / Component structure
        - Interface / Protocol
        - Configuration / Settings
        - Multiple areas
        - Unsure
        - Other
    validations:
      required: true

  - type: textarea
    id: scope_other_unsure
    attributes:
      label: Scope â€“ Other or Unsure (if applicable)
      description: >
        If you selected "Other" or "Unsure" above, please describe the scope.
      placeholder: Describe the scope if "Other" or "Unsure" was selected.
    validations:
      required: false

  # ---------------------------------------------------------------------------
  # Detailed Design
  # ---------------------------------------------------------------------------
  # The proposed solution in detail.
  # ---------------------------------------------------------------------------
  - type: markdown
    attributes:
      value: |
        ## Detailed Design

        Describe your proposed design in detail.

  - type: textarea
    id: detailed_design
    attributes:
      label: Proposed Design
      description: >
        Describe the design in detail. Include diagrams, code samples, or
        pseudocode if helpful.
      placeholder: |
        Example: "The plugin system would work as follows:
        1. Plugins implement a standard interface...
        2. A registry discovers and loads plugins...
        3. Hooks allow plugins to extend behavior..."
    validations:
      required: true

  - type: textarea
    id: api_changes
    attributes:
      label: API Changes (if applicable)
      description: >
        Describe any public API changes this design would introduce.
      placeholder: |
        Example: "New methods: register_plugin(), unregister_plugin()..."
      render: python
    validations:
      required: false

  # ---------------------------------------------------------------------------
  # Impact Analysis
  # ---------------------------------------------------------------------------
  # Understanding the impact helps evaluate the proposal.
  # ---------------------------------------------------------------------------
  - type: markdown
    attributes:
      value: |
        ## Impact Analysis

        Help us understand the impact of this change.

  - type: dropdown
    id: breaking_change
    attributes:
      label: Breaking Change?
      description: >
        Would this design introduce breaking changes?
        If Yes or Partially, please fill in the Migration Path section below.
      options:
        - "No â€“ Backward compatible"
        - "Yes â€“ Breaking changes required"
        - "Partially â€“ Some breaking changes"
        - Unsure
    validations:
      required: true

  - type: textarea
    id: migration
    attributes:
      label: Migration Path (if breaking)
      description: >
        If this introduces breaking changes, how would users migrate?
      placeholder: |
        Example: "Users would need to update their configuration to..."
    validations:
      required: false

  - type: dropdown
    id: complexity
    attributes:
      label: Estimated Complexity
      description: How complex is this design change to implement?
      options:
        - Low â€“ Straightforward implementation
        - Medium â€“ Moderate complexity
        - High â€“ Significant effort required
        - Unsure
    validations:
      required: true

  # ---------------------------------------------------------------------------
  # Alternatives
  # ---------------------------------------------------------------------------
  # Other approaches considered.
  # ---------------------------------------------------------------------------
  - type: textarea
    id: alternatives
    attributes:
      label: Alternatives Considered
      description: >
        What other designs or approaches did you consider? Why were they rejected?
      placeholder: |
        Example: "Alternative A: ... (rejected because...)"
    validations:
      required: false

  - type: textarea
    id: risks
    attributes:
      label: Risks & Mitigations (Optional)
      description: >
        What could go wrong with this design? How would you mitigate those risks?
      placeholder: |
        - Risk: Plugin isolation may be insufficient, allowing plugins to corrupt state
          Mitigation: Use process-level sandboxing or strict interface contracts
        - Risk: Performance overhead from plugin hooks
          Mitigation: Lazy loading and optional hook registration
    validations:
      required: false

  - type: textarea
    id: open_questions
    attributes:
      label: Open Questions (Optional)
      description: >
        What questions remain unresolved? What areas need input from reviewers?
      placeholder: |
        - Should plugins be loaded eagerly or lazily?
        - How should plugin versioning and compatibility be handled?
        - What's the right granularity for hook points?
    validations:
      required: false

  # ---------------------------------------------------------------------------
  # Implementation
  # ---------------------------------------------------------------------------
  # Information about implementation plans.
  # ---------------------------------------------------------------------------
  - type: dropdown
    id: contribution
    attributes:
      label: Would you be willing to implement this?
      description: >
        Design proposals with implementation help are more likely to be accepted.
      options:
        - Yes, I'd like to implement this
        - Yes, but I'd need guidance
        - Maybe, depending on complexity
        - No, I'm just proposing the idea
    validations:
      required: true

  # ---------------------------------------------------------------------------
  # Additional Context
  # ---------------------------------------------------------------------------
  - type: textarea
    id: additional_context
    attributes:
      label: Additional Context (Optional)
      description: >
        Add any other context, references, or prior art that supports this proposal.
      placeholder: |
        Links to similar designs in other projects, research papers, etc.
    validations:
      required: false

  # ---------------------------------------------------------------------------
  # Checklist
  # ---------------------------------------------------------------------------
  - type: checkboxes
    id: checklist
    attributes:
      label: Checklist
      options:
        - label: I have searched existing issues and discussions for similar proposals
          required: true
        - label: I have considered the impact on existing users
          required: false
        - label: I am willing to help refine this design based on feedback
          required: false
